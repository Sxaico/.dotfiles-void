#!/bin/sh
set -eu
APPS="$HOME/Applications"

set -- "$APPS"/*.AppImage
[ -e "$1" ] || exit 0

SEL="$(printf '%s\n' "$@" | sed 's|.*/||' | bemenu -i -p 'Actualizar AppImage' || true)"
[ -z "${SEL:-}" ] && exit 0
F="$APPS/$SEL"

if "$F" --appimage-update; then
  command -v notify-send >/dev/null 2>&1 && notify-send "AppImage" "Actualizado: $SEL"
else
  command -v notify-send >/dev/null 2>&1 && notify-send "AppImage" "Sin metadatos de update: $SEL"
fi

